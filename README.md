# codex-demo

## Описание проекта

Простой 2D платформер на Canvas без сторонних библиотек. Игрок собирает монеты, избегает врагов и побеждает после сбора всех монет.

Добавлен процедурный мультяшный рендер (фон с параллаксом, «земля с травой», слаймы, анимации), без картинок.

## Управление

- WASD или стрелки — движение.
- Пробел — прыжок.

## Как разрабатывать локально

Откройте файл `index.html` в браузере.

## Деплой

Проект автоматически публикуется на GitHub Pages с помощью workflow `.github/workflows/pages.yml`.

## GitHub Pages

Сайт будет доступен по адресу: https://<owner>.github.io/<repo>/

## Визуальный стиль

- зелёный и красный «слаймы» с дыханием, миганиями и сквошем;
- монета с бликом и покачиванием;
- платформы из грунта с травой и градиентными тенями;
- фон из трёх слоёв параллакса: градиентное небо, дальние холмы и облака.

## Архитектура мини-движка

Весь игровой код находится в `game.js` и построен на небольшом рендер-движке.

- **RendererClassic** и **RendererCartoon** — переключаемые режимы рендера и SAFE-режим;
- **Camera** — следует за игроком;
- **Layer** — набор спрайтов с коэффициентом параллакса;
- **Sprite** и **SpriteFromSVG** — базовые сущности для объектов и для отрисовки inline-SVG.

## Что изменилось

- Игрок и враг превратились в мультяшных «слаймов» с анимацией.
- Платформы строятся из тайлов грунта с травой.
- Монеты покачиваются и блестят.
- Фон рисуется несколькими слоями параллакса: градиентное небо, силуэты холмов и облака.
- Код разделён на классы `RendererClassic`, `RendererCartoon`, `Player`, `Enemy`, `Platform` и `Coin`.
- Столкновение с врагом отбрасывает игрока и респавнит его.

## Cartoon mode

Добавьте параметр `?mode=cartoon` к URL, чтобы включить мультяшный рендер. Без параметра используется классический режим.

## Runner mode

Новый псевдо-3D режим запускается параметром `?mode=runner`.

### Управление

- ←/→ или A/D — смещение влево/вправо;
- Пробел — краткий буст скорости (кулдаун 6 c);
- На тач-устройствах доступны экранные кнопки «◀ ▶».

### Механики

- Near-miss рядом с препятствием увеличивает множитель очков;
- Пикапы «солнца» пополняют таймер дня;
- SAFE-режим автоматически снижает дальность прорисовки и количество частиц на слабых устройствах.

## Skins

По умолчанию активен скин `slime`. Векторный костюм «заяц в цилиндре» включается параметрами `?mode=cartoon&skin=rabbit_svg`. Скин основан на inline-SVG и поддерживает дыхание, сквош/стретч, моргания и пружинящие уши.

## Performance

Движок следит за FPS. Если показатель падает ниже 30, включается SAFE-флаг: уменьшается число частиц, отключаются smear-следы и тени.

## FX

Параллакс-фон, cel-shading, обводки, экранная тряска, частицы при сборе монет и приземлении, бликующие монеты.
